"use strict";const projectOptions={states:{},maskes:{},error:{default:"Ошибка при отправке данных! Пожалуйста, попробуйте позже.",request:'Ошибка при отправке данных! Пожалуйста, свяжитесь с нами по телефону <a class="customLink customLink_light" href="tel:88005112733"><nobr>8 (800) 511-27-33</nobr></a>'},onClick:[]};let burg=document.querySelector(".js-burger"),menu=document.querySelector(".js-header-menu"),searchButton=document.querySelector(".headerActions__btn_search");function showMobileMenu(){if(!burg)return!1;burg.addEventListener("click",(function(){burg.classList.contains("is-open")?(burg.classList.remove("is-open"),page.classList.remove("is-bg"),body.classList.remove("is-hidden"),menu.classList.remove("show")):(burg.classList.add("is-open"),menu.classList.add("show"),page.classList.add("is-bg"),body.classList.add("is-hidden"))}))}document.addEventListener("click",(e=>{if(menu.classList.contains("show")){const t=e.composedPath().includes(menu),s=e.composedPath().includes(burg),i=e.composedPath().includes(searchButton);t||s||i||(menu.classList.remove("show"),burg.classList.remove("is-open"),page.classList.remove("is-bg"),body.classList.remove("is-hidden"))}return!1}));let headerSearch=document.querySelector(".header__search"),headerSearchClose=document.querySelector(".header__search-close"),headerSearchInput=document.querySelector(".searchForm__input"),headerSearchResult=document.querySelector(".searchResult"),searchBtn=document.querySelector(".headerActions__btn_search"),page=document.querySelector(".page"),body=document.querySelector("body");function headerFixed(){let e=document.querySelector("body"),t=document.querySelector("header"),s=document.querySelector(".js-first-screen");if(document.querySelector(".compare"))return!1;let i=t.offsetHeight;if(s){let a=i+s.offsetHeight;window.pageYOffset>a?(t.classList.add("fixed"),e.style.paddingTop=i+"px"):(t.classList.remove("fixed"),e.style.paddingTop="")}else window.pageYOffset>i?(t.classList.add("fixed"),e.style.paddingTop=i+"px"):(t.classList.remove("fixed"),e.style.paddingTop="")}window.addEventListener("load",(function(){searchBtn.addEventListener("click",(function(){menu.classList.contains("show")&&(menu.classList.remove("show"),burg.classList.remove("is-open")),headerSearch.classList.add("is-open"),page.classList.add("is-bg"),body.classList.add("is-hidden")})),headerSearchClose.addEventListener("click",(function(){headerSearch.classList.remove("is-open"),page.classList.remove("is-bg"),body.classList.remove("is-hidden")})),headerSearchInput.addEventListener("input",(function(){headerSearchInput.value.length>3?headerSearchResult.classList.add("is-open"):headerSearchResult.classList.remove("is-open")}))})),window.addEventListener("scroll",(function(){headerFixed()}));const breadcrumbs=()=>{const e=".js-breadcrumbs",t=document.querySelector(e);if(!t)return;const s=t.querySelector("[data-list]"),i=t.querySelector("[data-inside]"),a=s&&s.querySelectorAll("[data-item]"),o=s&&s.querySelector('[data-item="toggle"]');if(!a||!i||!a[0])return void t.classList.add("all-hide");const n={};function d(e,t){i.classList.contains("show")||"hide"===t?(toggleVisibility(i,"hide"),i.classList.remove("show")):(toggleVisibility(i,"show"),i.classList.add("show"))}function r(){let e=Math.ceil(s.getBoundingClientRect().width)-n.main-n.current,o=!1;e<n.link&&(e-=n.dots,o=!0);let d=0;for(let t=a.length-1;t>=0;t--){const s=a[t],n=s.getAttribute("data-item");if("dots"===n&&(o?(s.classList.remove("hide"),i.classList.remove("hide")):(s.classList.add("hide"),i.classList.add("hide"))),"link"===n){const t=s.getAttribute("data-index"),a=s.getAttribute("data-width"),o=i.querySelector('[data-item="'+t+'"]');a<e?(d++,e-=a,s.classList.remove("hide"),o&&o.classList.add("hide")):(s.classList.add("hide"),o&&o.classList.remove("hide"))}}d<1?t.classList.add("all-hide"):t.classList.remove("all-hide")}a.forEach((e=>{const t=Math.ceil(e.getBoundingClientRect().width),s=e.getAttribute("data-item");e.setAttribute("data-width",t),void 0!==n[s]?n[s]+=t:n[s]=t})),r(),o&&o.addEventListener("click",d),projectOptions.onClick.push((t=>{!t.closest(e)&&d(null,"hide")})),window.addEventListener("resize",throttle(r,150))},bindCallbackForm=e=>{if(!e)return!1;for(const t of e.querySelectorAll('input[type="tel"]'))Inputmask&&Inputmask({mask:["+7 999 999-99-99","8 999 999-99-99"],showMaskOnHover:!0}).mask(t);const t=e.querySelector(".form__text"),s=t.innerHTML;e.addEventListener("submit",(i=>{i.preventDefault(),e.querySelector('[type="submit"]').setAttribute("disabled","disabled"),fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then((e=>e.json())).then((({success:i})=>{i?(e.reset(),showMessageModal("В ближайшее время с Вами свяжется менеджер для уточнения всех деталей."),setTimeout((()=>{e.querySelector('[type="submit"]').removeAttribute("disabled")}),1e4)):(t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3))})).catch((()=>{t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3)}))}))};window.addEventListener("DOMContentLoaded",(()=>{bindCallbackForm(document.querySelector(".form_callcback"))}));let controls=document.querySelectorAll("[data-title]");window.addEventListener("load",(function(){controls[0]&&controls.forEach((e=>{e.addEventListener("click",(function(){e.classList.toggle("is-active")}))}))}));const throttle=(e,t)=>{console.log("sdaws");let s=null;return function(...i){s||(s=setTimeout((()=>{e(...i),clearTimeout(s),s=null}),t))}},toggleVisibility=(e,t="auto",s={},i)=>{if(!e)return!1;const a=Object.assign({display:"block",changeHeight:!0,changeOpacity:!0,animation:"ease-in-out",timeout:200,styles:""},s),o=`all ${a.timeout}ms ${a.animation}`,n=function(e){const t=e.getBoundingClientRect(),s=t.height||t.bottom-t.top,i=t.width||t.right-t.left;return!!s||!!i}(e);if(a._targetVisible="show"===t||"hide"!==t&&!n,a._targetVisible===n)return!1;if(a.styles&&e.setAttribute("style",a.styles),a._targetVisible){if(e.style.visibility="hidden",e.style.overflow="hidden",e.style.display=a.display,a.changeOpacity&&(e.style.opacity="0"),a.changeHeight){const t=r(e);a._h=t.h,a._pt=t.pt,a._pb=t.pb,a._mt=t.mt,a._mb=t.mb,a._btw=t.btw,a._bbw=t.bbw,e.style.height="0",e.style.marginTop="0",e.style.paddingTop="0",e.style.marginBottom="0",e.style.paddingBottom="0",e.style.borderTopWidth="0",e.style.borderBottomWidth="0"}setTimeout((function(){e.style.transition=o,e.style.visibility="visible"}),0)}else{if(a.changeOpacity&&(e.style.opacity="1"),a.changeHeight){const t=r(e);e.style.height=t.h+"px",e.style.marginTop=t.mt+"px",e.style.paddingTop=t.pt+"px",e.style.marginBottom=t.mb+"px",e.style.paddingBottom=t.pb+"px",e.style.borderTopWidth=t.btw+"px",e.style.borderBottomWidth=t.bbw+"px"}setTimeout((function(){e.style.overflow="hidden",e.style.transition=o}),0)}function d(e,t){return parseInt(getComputedStyle(e)[t],10)}function r(e){return{h:e.offsetHeight,mt:d(e,"marginTop"),pt:d(e,"paddingTop"),mb:d(e,"marginBottom"),pb:d(e,"paddingBottom"),btw:d(e,"borderTopWidth"),bbw:d(e,"borderBottomWidth")}}return setTimeout((function(){a.changeOpacity&&(e.style.opacity=a._targetVisible?"1":"0"),a.changeHeight&&(e.style.height=a._targetVisible?a._h+"px":"0",e.style.marginTop=a._targetVisible?a._mt+"px":"0",e.style.paddingTop=a._targetVisible?a._pt+"px":"0",e.style.marginBottom=a._targetVisible?a._mb+"px":"0",e.style.paddingBottom=a._targetVisible?a._pb+"px":"0",e.style.borderTopWidth=a._targetVisible?a._btw+"px":"0",e.style.borderBottomWidth=a._targetVisible?a._bbw+"px":"0")}),15),setTimeout((function(){e.setAttribute("style",(a._targetVisible?"display:"+a.display+";":"display:none;")+a.styles),"function"==typeof i&&i()}),a.timeout),!0},initImages=()=>{"function"==typeof lozad&&lozad(".lozad").observe()},initLazyLoadBlock=function(){lozad(".js-lazy-load-block",{load:function(e){const t=e.getAttribute("data-url");t&&axios.get(t).then((function(t){const s=t.data;e.classList.remove("loading"),s.error?(e.classList.add("error"),e.innerHTML='<div class="container">'+s.error+"</div>",console.warn(s.error)):(e.innerHTML=t.data,initDefaultElements())})).catch((function(t){e.classList.remove("loading"),e.classList.add("error"),e.innerHTML='<div class="container">'+projectOptions.error.default+"</div>",console.warn(t)}))}}).observe()},initDefaultElements=function(e){initImages()},pageReady=function(e){initLazyLoadBlock(),initDefaultElements(e),showMobileMenu(),breadcrumbs(),Fancybox.bind("[data-fancybox]",{})},showMessageModal=(e="В ближайшее время с Вами свяжется менеджер для уточнения всех деталей.",t="Спасибо",s="/catalog",i="В каталог",a)=>{Fancybox.show([{src:`<div class="modal-thank">\n<div class="modal-thank__title">${t}</div>\n${a?`<div class="modal-thank__subtitle">${a}</div>`:""}\n<div class="modal-thank__text">${e}</div>\n<a class="modal-thank__link" href="${s}">${i}</a>\n</div>`,type:"html"}])},showAddItemModal=(e,t,s,i)=>{Fancybox.show([{src:`\n      <div class="modal modal_white modal_card">\n          <div class="modal__body modal-card">\n              <div class="modal-card__title">${e}</div>\n              <div class="modal-card__inner">\n                  <span class="modal-card__img">\n                      <img src="${t.img?t.img:"/local/templates/main/assets/svg/logo_small.svg"}" alt="">\n                  </span>\n                  ${t.link?`<a href="${t.link}" class="modal-card__name">${t.name}</a>`:`<span class="modal-card__name">${t.name}</span>`}\n                  <div class="modal-card__wrapper">\n                      <div class="modal-card__prices">\n                          <div class="modal-card__price"></div>\n                          <div class="modal-card__price modal-card__price_old"></div>\n                      </div>\n                      <div class="modal-card__actions">\n                          <a href="${s}" class="modal-card__btn modal-card__btn_cart">${i}</a>\n                          <button type="button" class="modal-card__btn modal-card__btn_close" onclick="Fancybox.close()">В каталог</button>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n      `,type:"html"}])};document.addEventListener("DOMContentLoaded",pageReady);const bindPartnersForm=e=>{if(!e)return!1;for(const t of e.querySelectorAll('input[type="tel"]'))Inputmask&&Inputmask({mask:["+7 999 999-99-99","8 999 999-99-99"],showMaskOnHover:!0}).mask(t);const t=e.querySelector(".form__item_desc"),s=t.innerHTML;e.addEventListener("submit",(i=>{i.preventDefault(),e.querySelector('[type="submit"]').setAttribute("disabled","disabled"),fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then((e=>e.json())).then((({success:i})=>{i?(showMessageModal("В ближайшее время с Вами свяжется менеджер для уточнения всех деталей."),e.reset(),setTimeout((()=>{e.querySelector('[type="submit"]').removeAttribute("disabled")}),1e4)):(t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3))})).catch((()=>{t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3)}))}))};window.addEventListener("DOMContentLoaded",(()=>{bindPartnersForm(document.querySelector(".form_partners"))}));
//# sourceMappingURL=general.min.js.map
