"use strict";const projectOptions={states:{},maskes:{},error:{default:"Ошибка при отправке данных! Пожалуйста, попробуйте позже.",request:'Ошибка при отправке данных! Пожалуйста, свяжитесь с нами по телефону <a class="customLink customLink_light" href="tel:88005112733"><nobr>8 (800) 511-27-33</nobr></a>'},onClick:[]};let burg=document.querySelector(".js-burger"),menu=document.querySelector(".js-header-menu"),searchButton=document.querySelector(".headerActions__btn_search");function showMobileMenu(){if(!burg)return!1;burg.addEventListener("click",(function(){burg.classList.contains("is-open")?(burg.classList.remove("is-open"),page.classList.remove("is-bg"),body.classList.remove("is-hidden"),menu.classList.remove("show")):(burg.classList.add("is-open"),menu.classList.add("show"),page.classList.add("is-bg"),body.classList.add("is-hidden"))}))}document.addEventListener("click",(e=>{if(menu.classList.contains("show")){const t=e.composedPath().includes(menu),s=e.composedPath().includes(burg),i=e.composedPath().includes(searchButton);t||s||i||(menu.classList.remove("show"),burg.classList.remove("is-open"),page.classList.remove("is-bg"),body.classList.remove("is-hidden"))}return!1}));let headerSearch=document.querySelector(".header__search"),headerSearchClose=document.querySelector(".header__search-close"),headerSearchInput=document.querySelector(".searchForm__input"),headerSearchResult=document.querySelector(".searchResult"),searchBtn=document.querySelector(".headerActions__btn_search"),page=document.querySelector(".page"),body=document.querySelector("body");function headerFixed(){let e=document.querySelector("body"),t=document.querySelector("header"),s=document.querySelector(".js-first-screen");if(document.querySelector(".compare"))return!1;let i=t.offsetHeight;if(s){let o=i+s.offsetHeight;window.pageYOffset>o?(t.classList.add("fixed"),e.style.paddingTop=i+"px"):(t.classList.remove("fixed"),e.style.paddingTop="")}else window.pageYOffset>i?(t.classList.add("fixed"),e.style.paddingTop=i+"px"):(t.classList.remove("fixed"),e.style.paddingTop="")}window.addEventListener("load",(function(){searchBtn.addEventListener("click",(function(){menu.classList.contains("show")&&(menu.classList.remove("show"),burg.classList.remove("is-open")),headerSearch.classList.add("is-open"),page.classList.add("is-bg"),body.classList.add("is-hidden")})),headerSearchClose.addEventListener("click",(function(){headerSearch.classList.remove("is-open"),page.classList.remove("is-bg"),body.classList.remove("is-hidden")})),headerSearchInput.addEventListener("input",(function(){headerSearchInput.value.length>3?headerSearchResult.classList.add("is-open"):headerSearchResult.classList.remove("is-open")}))})),window.addEventListener("scroll",(function(){headerFixed()}));const breadcrumbs=()=>{const e=".js-breadcrumbs",t=document.querySelector(e);if(!t)return;const s=t.querySelector("[data-list]"),i=t.querySelector("[data-inside]"),o=s&&s.querySelectorAll("[data-item]"),n=s&&s.querySelector('[data-item="toggle"]');if(!o||!i||!o[0])return void t.classList.add("all-hide");const r={};function a(e,t){i.classList.contains("show")||"hide"===t?(toggleVisibility(i,"hide"),i.classList.remove("show")):(toggleVisibility(i,"show"),i.classList.add("show"))}function d(){let e=Math.ceil(s.getBoundingClientRect().width)-r.main-r.current,n=!1;e<r.link&&(e-=r.dots,n=!0);let a=0;for(let t=o.length-1;t>=0;t--){const s=o[t],r=s.getAttribute("data-item");if("dots"===r&&(n?(s.classList.remove("hide"),i.classList.remove("hide")):(s.classList.add("hide"),i.classList.add("hide"))),"link"===r){const t=s.getAttribute("data-index"),o=s.getAttribute("data-width"),n=i.querySelector('[data-item="'+t+'"]');o<e?(a++,e-=o,s.classList.remove("hide"),n&&n.classList.add("hide")):(s.classList.add("hide"),n&&n.classList.remove("hide"))}}a<1?t.classList.add("all-hide"):t.classList.remove("all-hide")}o.forEach((e=>{const t=Math.ceil(e.getBoundingClientRect().width),s=e.getAttribute("data-item");e.setAttribute("data-width",t),void 0!==r[s]?r[s]+=t:r[s]=t})),d(),n&&n.addEventListener("click",a),projectOptions.onClick.push((t=>{!t.closest(e)&&a(null,"hide")})),window.addEventListener("resize",throttle(d,150))},bindCallbackForm=e=>{if(!e)return!1;for(const t of e.querySelectorAll('input[type="tel"]'))Inputmask&&Inputmask({mask:["+7 999 999-99-99","8 999 999-99-99"],showMaskOnHover:!0}).mask(t);const t=e.querySelector(".form__text"),s=t.innerHTML;e.addEventListener("submit",(i=>{i.preventDefault(),fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then((e=>e.json())).then((({success:i})=>{i?(e.querySelector('[type="submit"]').setAttribute("disabled","disabled"),e.classList.add("sent"),setTimeout((()=>{e.querySelector('[type="submit"]').removeAttribute("disabled"),Fancybox.close(!0),e.classList.remove("sent")}),1e4),e.reset()):(t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3))})).catch((()=>{t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3)}))}))};window.addEventListener("DOMContentLoaded",(()=>{bindCallbackForm(document.querySelector(".form_callcback"))}));let controls=document.querySelectorAll("[data-title]");window.addEventListener("load",(function(){controls[0]&&controls.forEach((e=>{e.addEventListener("click",(function(){e.classList.toggle("is-active")}))}))}));const throttle=(e,t)=>{console.log("sdaws");let s=null;return function(...i){s||(s=setTimeout((()=>{e(...i),clearTimeout(s),s=null}),t))}},toggleVisibility=(e,t="auto",s={},i)=>{if(!e)return!1;const o=Object.assign({display:"block",changeHeight:!0,changeOpacity:!0,animation:"ease-in-out",timeout:200,styles:""},s),n=`all ${o.timeout}ms ${o.animation}`,r=function(e){const t=e.getBoundingClientRect(),s=t.height||t.bottom-t.top,i=t.width||t.right-t.left;return!!s||!!i}(e);if(o._targetVisible="show"===t||"hide"!==t&&!r,o._targetVisible===r)return!1;if(o.styles&&e.setAttribute("style",o.styles),o._targetVisible){if(e.style.visibility="hidden",e.style.overflow="hidden",e.style.display=o.display,o.changeOpacity&&(e.style.opacity="0"),o.changeHeight){const t=d(e);o._h=t.h,o._pt=t.pt,o._pb=t.pb,o._mt=t.mt,o._mb=t.mb,o._btw=t.btw,o._bbw=t.bbw,e.style.height="0",e.style.marginTop="0",e.style.paddingTop="0",e.style.marginBottom="0",e.style.paddingBottom="0",e.style.borderTopWidth="0",e.style.borderBottomWidth="0"}setTimeout((function(){e.style.transition=n,e.style.visibility="visible"}),0)}else{if(o.changeOpacity&&(e.style.opacity="1"),o.changeHeight){const t=d(e);e.style.height=t.h+"px",e.style.marginTop=t.mt+"px",e.style.paddingTop=t.pt+"px",e.style.marginBottom=t.mb+"px",e.style.paddingBottom=t.pb+"px",e.style.borderTopWidth=t.btw+"px",e.style.borderBottomWidth=t.bbw+"px"}setTimeout((function(){e.style.overflow="hidden",e.style.transition=n}),0)}function a(e,t){return parseInt(getComputedStyle(e)[t],10)}function d(e){return{h:e.offsetHeight,mt:a(e,"marginTop"),pt:a(e,"paddingTop"),mb:a(e,"marginBottom"),pb:a(e,"paddingBottom"),btw:a(e,"borderTopWidth"),bbw:a(e,"borderBottomWidth")}}return setTimeout((function(){o.changeOpacity&&(e.style.opacity=o._targetVisible?"1":"0"),o.changeHeight&&(e.style.height=o._targetVisible?o._h+"px":"0",e.style.marginTop=o._targetVisible?o._mt+"px":"0",e.style.paddingTop=o._targetVisible?o._pt+"px":"0",e.style.marginBottom=o._targetVisible?o._mb+"px":"0",e.style.paddingBottom=o._targetVisible?o._pb+"px":"0",e.style.borderTopWidth=o._targetVisible?o._btw+"px":"0",e.style.borderBottomWidth=o._targetVisible?o._bbw+"px":"0")}),15),setTimeout((function(){e.setAttribute("style",(o._targetVisible?"display:"+o.display+";":"display:none;")+o.styles),"function"==typeof i&&i()}),o.timeout),!0},initImages=()=>{"function"==typeof lozad&&lozad(".lozad").observe()},initLazyLoadBlock=function(){lozad(".js-lazy-load-block",{load:function(e){const t=e.getAttribute("data-url");t&&axios.get(t).then((function(t){const s=t.data;e.classList.remove("loading"),s.error?(e.classList.add("error"),e.innerHTML='<div class="container">'+s.error+"</div>",console.warn(s.error)):(e.innerHTML=t.data,initDefaultElements())})).catch((function(t){e.classList.remove("loading"),e.classList.add("error"),e.innerHTML='<div class="container">'+projectOptions.error.default+"</div>",console.warn(t)}))}}).observe()},initDefaultElements=function(e){initImages()},pageReady=function(e){initLazyLoadBlock(),initDefaultElements(e),showMobileMenu(),breadcrumbs(),Fancybox.bind("[data-fancybox]",{})};document.addEventListener("DOMContentLoaded",pageReady);const bindPartnersForm=e=>{if(!e)return!1;for(const t of e.querySelectorAll('input[type="tel"]'))Inputmask&&Inputmask({mask:["+7 999 999-99-99","8 999 999-99-99"],showMaskOnHover:!0}).mask(t);const t=e.querySelector(".form__item_desc"),s=t.innerHTML;e.addEventListener("submit",(i=>{i.preventDefault(),fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then((e=>e.json())).then((({success:i})=>{i?(e.querySelector('[type="submit"]').setAttribute("disabled","disabled"),t.innerHTML="Ваша заявка успешно отправлена. Мы свяжемся с вами в ближайшее время.",setTimeout((()=>{t.innerHTML=s,e.querySelector('[type="submit"]').removeAttribute("disabled")}),1e4),e.reset()):(t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3))})).catch((()=>{t.innerHTML='Не удалось отправить заявку. Попробуйте ещё раз, или свяжитесь с нами по телефону <a href="tel:+74959882028">+7(495) 988-20-28</a>.',setTimeout((()=>{t.innerHTML=s}),15e3)}))}))};window.addEventListener("DOMContentLoaded",(()=>{bindPartnersForm(document.querySelector(".form_partners"))}));
//# sourceMappingURL=general.min.js.map
