const bindCompareItemsSlider=(e,t)=>{if(!e)return!1;const n=e.parentElement.querySelector(".compare-section__control_prev"),o=e.parentElement.querySelector(".compare-section__control_next"),i=e.parentElement.querySelector(".compare-section__pagination"),c=new Swiper(e,{navigation:{prevEl:n,nextEl:o},pagination:{el:i,type:"fraction"},breakpoints:{1501:{slidesPerView:5},1251:{slidesPerView:4},1001:{slidesPerView:3},0:{slidesPerView:1}}}),r=e=>{const t=e.cloneNode(!0);t.classList.add("compare-section__items-slider_clone"),e.after(t);const n=t.querySelector(".compare-section__control_prev"),o=t.querySelector(".compare-section__control_next"),i=t.querySelector(".compare-section__pagination");return new Swiper(t.querySelector(".swiper"),{navigation:{prevEl:n,nextEl:o},slidesPerView:1,initialSlide:1,pagination:{el:i,type:"fraction"}})};if(window[`COMPARE_ADAPTIVE_${t}`]=!1,window.matchMedia("(max-width: 1000px)").matches){const t=r(e.parentElement);createAdaptiveStickyHeader(e.parentElement.parentElement,c,t)}window.addEventListener("resize",(()=>{if(!window[`COMPARE_ADAPTIVE_${t}`]&&window.matchMedia("(max-width: 1000px)").matches){const n=r(e.parentElement);createAdaptiveStickyHeader(e.parentElement.parentElement,c,n),window[`COMPARE_ADAPTIVE_${t}`]=!0}if(window[`COMPARE_ADAPTIVE_${t}`]&&window.matchMedia("(min-width: 1001px)").matches){const e=[...document.querySelectorAll(".compare-section__items-slider_clone")];e.length&&e.map((e=>{e.remove()}));const n=[...document.querySelectorAll(".mobile-sticky-header")];n.length&&n.map((e=>{e.remove()})),window[`COMPARE_ADAPTIVE_${t}`]=!1}}))},bindCompareTabs=e=>{if(!e)return!1;const t=[...e.querySelectorAll(".compare__tab-button")];if(!t.length)return!1;t.map((t=>{t.addEventListener("click",(n=>{n.preventDefault();const o=document.querySelector(t.getAttribute("href"));if(!o)return!1;const i=e.querySelector(".compare__tab-button_active"),c=document.querySelector(".compare__section_active");i&&i.classList.remove("compare__tab-button_active"),c&&c.classList.remove("compare__section_active"),t.classList.add("compare__tab-button_active"),t.scrollIntoView({behavior:"smooth"}),o.classList.add("compare__section_active")}))}))},createAdaptiveStickyHeader=(e,t,n)=>{const o=document.createElement("div");o.classList.add("mobile-sticky-header");const i=document.createElement("div");i.classList.add("container"),o.append(i);const c=(e,t,n=0)=>{const o=document.createElement("div");o.classList.add("swiper");const c=document.createElement("div");c.classList.add("swiper-wrapper");const r=document.createElement("div");r.classList.add("mobile-sticky-header__pagination"),o.append(r);const a=document.createElement("button");a.setAttribute("type","button"),a.classList.add("mobile-sticky-header__control"),a.classList.add("mobile-sticky-header__control_prev"),o.append(a);const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add("mobile-sticky-header__control"),s.classList.add("mobile-sticky-header__control_next"),o.append(s),[...t].map((e=>{const t=document.createElement("div");t.classList.add("swiper-slide"),t.append(e.querySelector(".compare-item__name").cloneNode(!0));const n=document.createElement("button");n.classList.add("compare-item__to-cart"),n.setAttribute("type","button"),n.innerText="В корзину",t.append(n),c.append(t)})),o.append(c),i.append(o),new Swiper(o,{slidesPerView:1,controller:{control:e},pagination:{el:r,type:"fraction"},initialSlide:n,navigation:{prevEl:a,nextEl:s}})};c(t,t.el.querySelectorAll(".swiper-slide"),0),c(n,t.el.querySelectorAll(".swiper-slide"),1),e.append(o),window.addEventListener("scroll",(()=>{const e=document.querySelector(".compare__section_active .compare-item__char"),t=document.querySelector(".compare__section_active .mobile-sticky-header");if(window.matchMedia("(min-width: 1001px)").matches)return!1;e&&t&&(e.getBoundingClientRect().top<70&&!t.classList.contains("mobile-sticky-header_show")?t.classList.add("mobile-sticky-header_show"):e.getBoundingClientRect().top>=70&&t.classList.remove("mobile-sticky-header_show"))}))};window.addEventListener("DOMContentLoaded",(()=>{const e=[...document.querySelectorAll(".compare-section__items-slider .swiper")];e.length&&e.map(((e,t)=>{bindCompareItemsSlider(e,t)})),bindCompareTabs(document.querySelector(".compare__toggles"))}));